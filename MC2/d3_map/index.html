<!DOCTYPE html>
<!--
Created using JS Bin
http://jsbin.com

Copyright (c) 2018 by anonymous (http://jsbin.com/xehitupepo/1/edit)

Released under the MIT license: http://jsbin.mit-license.org
-->
<meta name="robots" content="noindex">
<meta charset="utf-8">
<head>
  <title>Force layout (foci)</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.2/d3.min.js"></script>
  <style type="text/css">
  .bgimg {
    background-image: url('https://raw.githubusercontent.com/diegolpedro/infovis/gh-pages/MC2/img/Waterways%20Final.jpg');
    background-repeat: no-repeat;
    }
  </style>
</head>
<body>
  
  <div id="content" class="bgimg">
    <svg width="887" height="887">
    </svg>
  </div>
  
  <script>
    
     
    var nodes = [{"id":2298,"value":0.84,"log_value":-0.075720714,"location":"Boonsri","sample date":"15/02/1998","measure":"Total coliforms","grupo":1,"x":486,"y":149},
                 {"id":2299,"value":10,"log_value":0,"location":"Boonsri","sample date":"15/02/1998","measure":"Fecal coliforms","grupo":1,"x":486,"y":149},
                 {"id":5088,"value":4,"log_value":0.602059991,"location":"Chai","sample date":"20/02/1998","measure":"Water temperature","grupo":2,"x":568,"y":487},
                 {"id":5090,"value":8.04,"log_value":0.905256049,"location":"Chai","sample date":"20/02/1998","measure":"Dissolved oxygen","grupo":2,"x":568,"y":487},
                 {"id":9332,"value":5,"log_value":0,"location":"Kannika","sample date":"24/02/1998","measure":"Total coliforms","grupo":3,"x":618,"y":755},
                 {"id":9333,"value":6,"log_value":0,"location":"Kannika","sample date":"24/02/1998","measure":"Fecal coliforms","grupo":3,"x":618,"y":755}];
      
      var simulation = d3.forceSimulation(nodes)
                         .force('charge', d3.forceManyBody().strength(15))
                         .force('x', d3.forceX(function(d) { return d.x }))
                         .force('y', d3.forceY(function(d) { return d.y }))
                         .force('over', d3.forceCollide(18))
                         .on('tick', ticked);
            
      function ticked() {
      
          var u = d3.select('svg')
                    .selectAll('circle')
                    .data(nodes)

          u.enter()
            .append('circle')
            .attr('r', function(d) { return d.value })
            .merge(u)
            .attr('cx', function(d) { return d.x })
            .attr('cy', function(d) { return d.y })
            .attr('fill', function(d) { return 'red' })
          
          u.exit().remove()
          }
      
  </script>
</body>
</html>   
